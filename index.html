<!DOCTYPE html>

<html>
  <head>
    <title>Colour Game</title>
    <link rel="stylesheet" href="./index.css" />
  </head>
  <body onload="newLevel()">
    <div id="header">
      <h1>Colour Guessing Game</h1>
      <br>
      <button class="btn" id="newgame">New Game</button>
      </br>
      <div class = "row">
        <h2 id="rounddiv"></h2>
        <h2 id="countdiv"></h2>
        <h2 id="scorediv"></h2>
      </div>
      <br>
      <h2 id="rgb"></h2>
      </br>
    </div>
    <div id="container">
        <button class="tile" id=0></button>
        <button class="tile" id=1></button>
        <button class="tile" id=2></button>
        <button class="tile" id=3></button>
        <button class="tile" id=4></button>
        <button class="tile" id=5></button>
    </div>

    <script>
      var N=6,score=0,count=0,round=0,correct,correctColor;
      function getRandomColor() {
        var letters = "0123456789ABCDEF";
        var color = "#";
        for (var i = 0; i < 6; i++) {
          color += letters[Math.floor(Math.random() * 16)];
        }
        return color;
      }

      function update() {
        document.getElementById("rounddiv").innerHTML="Level: "+round;
        document.getElementById("scorediv").innerHTML="Score: "+score;
        document.getElementById("countdiv").innerHTML="Attempts: "+count;
      }

      function newLevel() {
        count=0;
        round++;
        update();
        for (let i=0; i<N; i++) {
          document.getElementById(i).style.background= getRandomColor();
        }
        correct=Math.floor(Math.random()*6);
        correctColor = document.getElementById(correct).style.background ;
        document.getElementById("rgb").innerHTML= "RGB" + String(correctColor).substr(3);
      }

      function check() {
        count++;
        if (this.style.background==correctColor) {
          score += 5
          update();
          newLevel();
        }
        else {
          score--; 
          update();
        }
      }

      for (let i=0; i<N; i++) {
        document.getElementById(i).addEventListener("click",check);
      }

      document.getElementById("newgame").addEventListener("click",function(){
        score=0,count=0,round=0;
        newLevel();
      });
    </script>
  </body>
</html>